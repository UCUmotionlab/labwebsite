{% assign lang = page.lang | default: "en" %}
{% assign type_filter = include.type %}

<div class="collaborators-list">
  {% for collab in site.data.collaborators %}
    {% if type_filter == nil or collab.type == type_filter %}
    <div class="collaborator-card">
      {% if collab.logo %}
      <div class="collaborator-logo">
        <img src="{{ collab.logo | relative_url }}" alt="{{ collab.institution }}">
      </div>
      {% endif %}
      <div class="collaborator-info">
        <h4>
          {% if collab.link %}
          <a href="{{ collab.link }}" target="_blank">
            {% if lang == "es" %}{{ collab.name }}{% else %}{{ collab.name_en | default: collab.name }}{% endif %}
          </a>
          {% else %}
            {% if lang == "es" %}{{ collab.name }}{% else %}{{ collab.name_en | default: collab.name }}{% endif %}
          {% endif %}
        </h4>
        <p class="institution">{{ collab.institution }}</p>
        <p class="description">
          {% if lang == "es" %}{{ collab.description_es | default: collab.description }}{% else %}{{ collab.description }}{% endif %}
        </p>
      </div>
    </div>
    {% endif %}
  {% endfor %}
</div>
